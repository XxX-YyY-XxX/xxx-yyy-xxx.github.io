<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/assets/css/style.css?v=2d3b5126dd9bdaf552f3aef918356c51b10c15a9">
        <link rel="stylesheet" href="/externalcss.css">

        <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->
            <!-- Setup theme-color -->

            <!-- start theme color meta headers -->
            <meta name="theme-color" content="#151515">
            <meta name="msapplication-navbutton-color" content="#151515">
            <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
            <!-- end theme color meta headers -->

            <!-- Setup Google Analytics -->

            <!-- You can set your favicon here -->
            <link rel="icon" type="image/png" href="/univasset/Favicon.png">
        <!-- end custom head snippets -->

        <!-- Begin Jekyll SEO tag v2.8.0 -->
        <title>GFL FAQs | Random Scraps.</title>
        <meta name="generator" content="Jekyll v3.9.0" />
        <meta property="og:title" content="Random Scraps" />
        <meta property="og:locale" content="en_US" />
        <meta name="description" content="GFL FAQs." />
        <meta property="og:description" content="GFL FAQs." />
        <link rel="canonical" href="https://xxx-yyy-xxx.github.io/" />
        <meta property="og:url" content="https://xxx-yyy-xxx.github.io/" />
        <meta property="og:site_name" content="Random Scraps" />
        <meta property="og:type" content="website" />
        <meta name="twitter:card" content="summary" />
        <meta property="twitter:title" content="Random Scraps" />
        <script type="application/ld+json">
        {"@context":"https://schema.org","@type":"WebSite","description":"GFL FAQs.","headline":"Random Scraps","name":"Random Scraps","url":"https://xxx-yyy-xxx.github.io/"}</script>
        <!-- End Jekyll SEO tag -->
    </head>

    <body>
        <header>
            <div class="container">
                <a id="a-title" href="/"><h1>Random Scraps</h1></a>
                <h2>Girls' Frontline Reddit Lounge FAQs</h2>
            </div>
        </header>

        <div class="container">
            <section id="main_content">
                <p><h1><a href="/GFL/indexsub">Link to topics repository.</a></h1></p>

                <p>Use <code>Tags:</code> at the start to search using tags. Use Space to separate tags. Tags are case-sensitive.</p>
                <!-- Radio button to switch between word search and tag search. Checkbox for each tag. CSS to hide. -->
                <form onsubmit="findCards()">
                    <input type="text" placeholder="Search..." id="search-text">
                    <input type="submit">
                </form>
                
                <div id="qna"></div>
            </section>
        </div>

        <script type="text/javascript" src="/GFL/tempcard.js"></script>
        <!--script type="text/json" src="/GFL/cards.json"></script-->
        <script type="text/javascript" src="/externaljavascript.js"></script>
        <script>
            const cardField = document.getElementById("qna");
            const questionCards = data;
            
            if (sessionStorage.outputCards == null) {
                cardField.innerHTML = randomCards();
            } else if (sessionStorage.outputCards != null) {
                cardField.innerHTML = searchCards();
            } else {                                                            //Catch
                cardField.innerHTML = 'Wierd jank: ' + sessionStorage.outputCards;
            }

            function findCards() {                                              //Runs on submit
                sessionStorage.outputCards = document.getElementById('search-text').value;
            }

            function searchCards() {
                let searchText = sessionStorage.outputCards;
                let matchCheck;
                let output = '';

                if (searchText.includes('Tags:')) {
                    let cardTags = searchText.replace('Tags:', '').split(' ').filter(Boolean);
                    matchCheck = function(card) {
                        return IsSubsetOf(cardTags, card.tags);
                    }
                } else {
                    if (searchText) {
                        let phrase = new RegExp(searchText, 'i');
                        matchCheck = function(card) {
                            return phrase.test(card.questions) || phrase.test(card.answers);
                        }
                    } else {
                        return 'Empty search.';
                    }
                }

                for (const cards of questionCards) {
                    if (matchCheck(cards)) {
                        output += setQuestionBoxes(cards);
                    }
                }

                return output;
            }

            function randomCards() {
                let maxValue = questionCards.length;
                let indices = [];
                let output = '';

                for (let i = 0; i < 3; i++) {
                    do {
                        var newItem = Math.floor(Math.random() * maxValue)
                    } while (indices.includes(newItem))
                    indices.push(newItem);
                }

                for (const index of indices) {
                    output += setQuestionBoxes(questionCards[index]);
                }

                return output;
            }

            function setQuestionBoxes(cards) {
                return `<br><fieldset>
                    <legend><h3>${cards.questions}</h3></legend>
                    ${cards.answers}
                    <hr>
                    Tags: ${cards.tags.map(val => `<span class="tags">${val}</span>` ).join(' ')}
                    </fieldset>`;
            }
        </script>
    </body>
</html>