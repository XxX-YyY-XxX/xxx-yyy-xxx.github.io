<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/assets/css/style.css?v=2d3b5126dd9bdaf552f3aef918356c51b10c15a9">
        <link rel="stylesheet" href="/externalcss.css">

        <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->
            <!-- Setup theme-color -->

            <!-- start theme color meta headers -->
            <meta name="theme-color" content="#151515">
            <meta name="msapplication-navbutton-color" content="#151515">
            <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
            <!-- end theme color meta headers -->

            <!-- Setup Google Analytics -->

            <!-- You can set your favicon here -->
            <link rel="icon" type="image/png" href="/univasset/Favicon.png">
        <!-- end custom head snippets -->

        <!-- Begin Jekyll SEO tag v2.8.0 -->
        <title>Random Scraps | GFL FAQs first. Might add things later.</title>
        <meta name="generator" content="Jekyll v3.9.0" />
        <meta property="og:title" content="Random Scraps" />
        <meta property="og:locale" content="en_US" />
        <meta name="description" content="GFL FAQs first. Might add things later." />
        <meta property="og:description" content="GFL FAQs first. Might add things later." />
        <link rel="canonical" href="https://xxx-yyy-xxx.github.io/" />
        <meta property="og:url" content="https://xxx-yyy-xxx.github.io/" />
        <meta property="og:site_name" content="Random Scraps" />
        <meta property="og:type" content="website" />
        <meta name="twitter:card" content="summary" />
        <meta property="twitter:title" content="Random Scraps" />
        <script type="application/ld+json">
        {"@context":"https://schema.org","@type":"WebSite","description":"GFL FAQs first. Might add things later.","headline":"Random Scraps","name":"Random Scraps","url":"https://xxx-yyy-xxx.github.io/"}</script>
        <!-- End Jekyll SEO tag -->
    </head>

    <body>
        <header>
            <div class="container">
                <a id="a-title" href="/"><h1>Random Scraps</h1></a>
                <h2>Trial HTML Index Page</h2>
            </div>
        </header>

        <div class="container">
            <section id="main_content">

                <p>Use <code>Tags:</code> to search using tags.</p>

                <form onsubmit="findCard()">
                    <input type="text" placeholder="Search..." id="search-text">
                    <input type="submit">
                </form>
                
                <div id="qna"></div>

            </section>
        </div>

        <!--script src="/GFL/cards.json"></script-->
        <script type="text/javascript" src="/externaljavascript.js"></script>
        <script>
            //const questionCards = require('/GFL/cards.json');
            const searchText = document.getElementById('search-text');
            const cardField = document.getElementById("qna");
            var boxes = '';
            var questionCards;

            /* const questionCards = fetch('/GFL/cards.json')
                .then(response => response.json() )
                .then(data => appendData(data) )
                .catch(err => console.log(err) );
            */

            var oXHR = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
            oXHR.onreadystatechange = function() {
                if (oXHR.readyState === 4 && oXHR.status == "200")
                    questionCards = JSON.parse(this.responseText);
            };
            oXHR.overrideMimeType("application/json");
            oXHR.open("GET", "/GFL/cards.json", true);          // true = ASYNCHRONOUS REQUEST (DESIRABLE), false = SYNCHRONOUS REQUEST.
            oXHR.send();

            function findCard() {                                         //run on pressing search
                if (phrase.includes('Tags:')) {
                    const cardTags = searchText.value.replace('Tags:', '').split(' ').filter(singleTags => singleTags !== '');
                } else {
                    const phrase = `/${searchText.value}/i`
                }
    
                for (const cards of questionCards) {    
                    if (cards.questions.search(phrase) > -1 || cards.answers.search(phrase) > -1 || IsSubsetOf(cardTags, cards.tags)) {
                        let tagList = cards.tags.map(tagObject => {`<span class="tags">${tagObject}</span>`});
    
                        boxes += `<fieldset>
                            <legend><h3>${cards.questions}</h3></legend>
                            <blockquote>${cards.answers}</blockquote>
                            <br></br>
                            Tags: ${tagList.join()}
                            </fieldset>`;
                    }
                }
    
                cardField.innerHTML = boxes;
            }
        </script>
    </body>
</html>